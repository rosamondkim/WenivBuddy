# 질문

1. 수강생이 준 에러메세지 캡쳐로 질문을 등록했어 (![alt text](image-1.png))
2. 그 이미지로 OCR을 돌려서 텍스트를 뽑고, 그걸로 질문을 등록하는 구조인건지 확인이 필요해
3. 동일한 이미지로 다시 질문을 검색하면 해당 답변이 나오지 않고 있어. `이미지에서 추출된 텍스트:

ERR! code EACCES
ERR! syscall mkdir
ERR! path /usr/local/lib/node_m` 형식으로 텍스트만 추출되고 있어.

이 문제를 해결해야돼.

# 질문2

여전히 이 문제가 동일하게 발생해. 구조 자체를 바꿔야한다고
qna-011 문제의 이미지를 그대로 질문 형식에 업로드하면

```
code EACCES
syscall mkdir
path /usr/local/lib/node_modules/gitmoji-cli
errno -13
Error: EACCES: permission denied, mkdir '/usr/local/lib/node_modules/gitmoji-cli'
[Error: EACCES: permission denied, mkdir '/usr/local/lib/node_modules/gitmoji-cli']
errno: -13,
code: 'EACCES',
syscall: 'mkdir',
path: '/usr/local/lib/node_modules/gitmoji-cli'
```

위와 같이 텍스트는 잘 뽑아내, 다만 이 텍스트로 '검색'을 하게 해야한다고.'permission denied' 라는 키워드만 검색해도 011 결과가 나온단말야. 현재 이 로직은 permission denied 라는 단어 하나도 검색하고 있지 못한다고.

# 답변

해결한 문제

근본 원인: cleanMarkdown 함수가 코드 블록(```)을 발견하면 내용까지 모두 삭제하고 있었습니다.

// 이전 (문제)
.replace(/`{1,3}[^`]+`{1,3}/g, '') // 모든 내용 삭제!

// 수정 후 (해결)
.replace(/^`[\w]*\n?/gm, '') // 시작 마커만 제거
  .replace(/\n?`$/gm, '') // 끝 마커만 제거
.replace(/`([^`\n]+)`/g, '$1') // 인라인 코드는 내용 유지
