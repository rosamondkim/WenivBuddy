# 질문

키워드 추출 시스템 (lib/keyword-extractor.js) 파일에 문제가 있음

1. 기술적 용어들의 한국어 버전이 정의되지 않았다. (자바스크립트 -> JavaScript)
2. 질문에서 오타가 날 경우, 혹은 학생들이 정확한 기술적 용어를 모를 경우

상황 예시)

1. 학생이 "(캡쳐 이미지를 보내며) 지금 css 파일에서 에러가 나요. " 질문을 함
2. 멘토가 확인 -> 에러 및 원인 확인(VSC의 버전 문제임을 인식)
3. [문제 상황] 질문 필드에 캡쳐 이미지를 그대로 붙여넣을 수는 없음. 여기서 멘토가 직접 그 키워드를 입력해야 함 ex) ' 'VSC 버전, CSS 중첩 문법 업데이트 등...' => 번거로움 발생

우리가 직접 키워드 추출 시스템을 만들어서 매핑하는게 올바른 선택일까?
위 내용을 읽고 판단해서 여러가지 전략을 제안해줘

# 답변

---

현재 시스템의 한계

1. 한국어 매핑 문제

// 현재 상황
"자바스크립트로 배열 정렬하는 방법" → 키워드: ["배열", "정렬", "방법"]
// JavaScript를 인식 못함 ❌

// 필요한 것
"자바스크립트" → "JavaScript" 매핑

2. 오타/유사어 문제

VSC, 비쥬얼스튜디오, 비스코, vscode → 모두 "VSCode"로 매핑 필요
리액트, 리엑트, react → "React"

3. 컨텍스트 이해 부족

"CSS에서 에러 나요" (이미지: 중첩 문법 에러)
→ 시스템이 "중첩 문법", "nesting" 같은 키워드 추출 불가 ❌

---

**전략 1: 직접 구현 강화 (현재 방식 개선)**

A. 한영 매핑 사전 추가

// lib/keyword-extractor.js
const TECH_TERMS_KO_TO_EN = {
// 프로그래밍 언어
"자바스크립트": "JavaScript",
"자바": "Java",
"파이썬": "Python",
"타입스크립트": "TypeScript",

    // 프레임워크/라이브러리
    "리액트": "React",
    "뷰": "Vue",
    "넥스트": "Next.js",
    "익스프레스": "Express",

    // 도구
    "깃": "Git",
    "깃헙": "GitHub",
    "비주얼스튜디오코드": "VSCode",

    // CSS 개념
    "플렉스박스": "flexbox",
    "그리드": "grid",

    // 기타
    "에이피아이": "API",
    "제이슨": "JSON",

}

// 유사어/오타 매핑
const SIMILAR_TERMS = {
"vsc": "VSCode",
"비주얼스튜디오": "VSCode",
"리엑트": "React",
"리액트": "React",
"넥스트제이에스": "Next.js",
}

장점:

- 즉시 적용 가능
- 추가 비용 없음
- 완전한 제어 가능

단점:

- 사전 유지보수 부담 큼
- 새로운 기술/용어 추가 필요
- 컨텍스트 이해 불가
- 오타 대응 한계

비용: 0원
구현 시간: 1-2일

---

전략 2: LLM 활용 (추천 ⭐)

A. 키워드 추출을 LLM에 위임

// lib/llm-keyword-extractor.js
import OpenAI from 'openai'

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })

export async function extractKeywordsWithLLM(question) {
const prompt = `다음 질문에서 기술적 키워드를 추출해주세요.
한글 용어는 영문으로 변환하고, 오타는 수정해주세요.

질문: "${question}"

JSON 형식으로 응답:
{
"keywords": ["키워드1", "키워드2"],
"category": "Frontend" | "Backend" | "CSS" | "JavaScript" | "Git" | "도구",
"corrected_terms": {"오타": "올바른용어"}
}
`

    const response = await openai.chat.completions.create({
      model: "gpt-4o-mini", // 저렴한 모델
      messages: [{ role: "user", content: prompt }],
      response_format: { type: "json_object" }
    })

    return JSON.parse(response.choices[0].message.content)

}

// 사용 예시
const result = await extractKeywordsWithLLM(
"자바스크립트로 배열 정렬하는 방법"
)
// {
// keywords: ["JavaScript", "배열", "정렬", "Array.sort"],
// category: "JavaScript",
// corrected_terms: { "자바스크립트": "JavaScript" }
// }

장점:

- 한영 자동 변환
- 오타 자동 수정
- 컨텍스트 이해 가능
- 유지보수 부담 적음
- 새로운 기술 자동 대응

단점:

- 비용 발생
- 응답 속도 (0.5~1초)
- API 의존성

비용 계산:

- GPT-4o-mini: $0.15 / 1M 입력 토큰
- 질문당 약 100 토큰 → $0.000015
- 1000번 검색해도 $0.015 (약 20원)

구현 시간: 2-3시간

---

B. 하이브리드: 로컬 + LLM 폴백

// lib/hybrid-keyword-extractor.js
export async function extractKeywordsHybrid(question) {
// 1단계: 로컬 추출 (빠름, 무료)
const localKeywords = extractKeywords(question)

    // 2단계: 신뢰도 체크
    const confidence = calculateConfidence(localKeywords)

    // 신뢰도 낮으면 LLM 사용
    if (confidence < 0.7) {
      const llmResult = await extractKeywordsWithLLM(question)
      return {
        ...llmResult,
        source: 'llm'
      }
    }

    return {
      keywords: localKeywords,
      source: 'local'
    }

}

function calculateConfidence(keywords) {
// 기술 용어가 하나도 없으면 신뢰도 낮음
const hasTechTerm = keywords.some(k =>
TECH_TERMS.has(k) || /^[A-Z]/.test(k)
)

    return hasTechTerm ? 0.8 : 0.3

}

장점:

- 대부분 무료로 처리
- 어려운 경우만 LLM
- 비용 효율적

비용: 월 $1~5 예상

---

전략 3: 멘토 보조 시스템

A. 자동 추출 + 수동 검증 UI

// components/admin/keyword-editor.jsx
"use client"

export function KeywordEditor({ question, initialKeywords }) {
const [keywords, setKeywords] = useState(initialKeywords)
const [suggestedKeywords, setSuggestedKeywords] = useState([])

    useEffect(() => {
      // 백그라운드에서 LLM 제안 가져오기
      extractKeywordsWithLLM(question).then(result => {
        setSuggestedKeywords(result.keywords)
      })
    }, [question])

    return (
      <div>
        <h3>현재 키워드</h3>
        <div className="flex gap-2">
          {keywords.map(kw => (
            <Badge key={kw} onClick={() => removeKeyword(kw)}>
              {kw} ×
            </Badge>
          ))}
        </div>

        <h3>AI 제안 키워드</h3>
        <div className="flex gap-2">
          {suggestedKeywords
            .filter(kw => !keywords.includes(kw))
            .map(kw => (
              <Button
                key={kw}
                variant="outline"
                onClick={() => addKeyword(kw)}
              >
                + {kw}
              </Button>
            ))}
        </div>

        <Input
          placeholder="직접 입력..."
          onKeyDown={(e) => {
            if (e.key === 'Enter') {
              addKeyword(e.target.value)
              e.target.value = ''
            }
          }}
        />
      </div>
    )

}

장점:

- 멘토가 최종 확인
- 품질 보장
- 점진적 학습 가능

단점:

- 여전히 수동 작업 필요
  **- 실시간성 낮음**

---

전략 4: 이미지 인식 추가

캡처 이미지에서 자동 키워드 추출

// lib/image-keyword-extractor.js
import OpenAI from 'openai'

const openai = new OpenAI()

export async function extractKeywordsFromImage(imageUrl, question) {
const response = await openai.chat.completions.create({
model: "gpt-4o", // 비전 지원
messages: [{
role: "user",
content: [
{
type: "text",
text: `이미지는 "${question}"에 대한 에러 화면입니다.
이미지를 분석하고 관련 키워드를 추출해주세요.

- 에러 메시지
- 파일명
- 코드 문법
- 도구/IDE
  등을 JSON으로 반환해주세요.`
  },
  {
  type: "image_url",
  image_url: { url: imageUrl }
  }
  ]
  }],
  response_format: { type: "json_object" }
  })

  return JSON.parse(response.choices[0].message.content)
  }

// 사용 예시
const result = await extractKeywordsFromImage(
"캡처이미지.png",
"CSS에서 에러 나요"
)
// {
// keywords: ["CSS", "nesting", "VSCode", "구문 에러"],
// error_type: "syntax",
// tool: "VSCode",
// version_issue: true
// }

장점:

- 이미지에서 직접 정보 추출
- 멘토 부담 최소화
- 정확도 높음

단점:

- 비용 높음 (GPT-4o)
- 응답 시간 길음 (2-3초)

비용:

- GPT-4o: $2.50 / 1M 입력 토큰
- 이미지 1개: 약 $0.01~0.02
- 1000번 사용 시 $10~20

---

💡 최종 추천: 3단계 접근

Phase 1 (즉시): 하이브리드 시스템

// 90%는 로컬 처리 (무료)
// 10%만 LLM 사용 (저비용)
// 월 비용: $1~3

Phase 2 (1개월 후): 멘토 피드백 루프

// 멘토가 수정한 키워드를 학습 데이터로 축적
// 로컬 사전 자동 업데이트
// 정확도 향상

Phase 3 (3개월 후): 이미지 분석 추가

// 이미지 첨부 시에만 GPT-4o 사용
// 나머지는 기존 방식
// 월 비용: $10~30 (100~300개 이미지 케이스)

---

## 구체적인 구현 예시

추천 시스템 구조

// lib/smart-keyword-extractor.js

export async function extractKeywordsSmart(question, imageUrl = null) {
// 1. 로컬 추출 시도
const localResult = extractKeywords(question)

    // 2. 한영 매핑 적용
    const mappedKeywords = applyKoreanMapping(localResult)

    // 3. 신뢰도 체크
    const confidence = calculateConfidence(mappedKeywords)

    // 4. 이미지가 있으면 이미지 분석
    if (imageUrl) {
      const imageKeywords = await extractKeywordsFromImage(imageUrl, question)
      return mergeKeywords(mappedKeywords, imageKeywords)
    }

    // 5. 신뢰도 낮으면 LLM 사용
    if (confidence < 0.6) {
      return await extractKeywordsWithLLM(question)
    }

    // 6. 신뢰도 높으면 로컬 결과 사용
    return {
      keywords: mappedKeywords,
      source: 'local',
      confidence
    }

}

---

비용 비교

| 전략             | 월 비용 (1000 질문 기준) | 정확도 | 구현 난이도 |
| ---------------- | ------------------------ | ------ | ----------- |
| 직접 구현 강화   | $0                       | 60-70% | 중간        |
| LLM 전체         | $1-3                     | 90-95% | 쉬움        |
| 하이브리드       | $0.5-2                   | 85-90% | 중간        |
| 이미지 분석 추가 | $10-30                   | 95%+   | 어려움      |

---

결론

제 추천: 하이브리드 시스템 (전략 2B)

이유:

1. 비용 효율적 (월 $1~3)
2. 정확도 높음 (85-90%)
3. 구현 시간 짧음 (1일)
4. 점진적 개선 가능

단계별 실행:

1. 지금: 한영 매핑 사전 추가 (2시간)
2. 이번 주: LLM 폴백 구현 (1일)
3. 다음 주: 멘토 검증 UI 추가 (2일)
4. 1개월 후: 이미지 분석 검토

직접 만든 키워드 추출 시스템은 기본 방어선으로 유지하고, LLM을 보조 도구로 활용하는 것이 가장 현실적입니다!
